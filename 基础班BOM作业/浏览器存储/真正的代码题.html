<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="goods">商品1<button class="add" onclick="buy(1)">加入购物车</button><button class="move" onclick="deletegood(1)">从购物车中减少</button></div>
    <div class="goods">商品2<button class="add" onclick="buy(2)">加入购物车</button><button class="move" onclick="deletegood(2)">从购物车中减少</button></div>
    <div class="goods">商品3<button class="add" onclick="buy(3)">加入购物车</button><button class="move" onclick="deletegood(3)">从购物车中减少</button></div>
    <div id="basket"><button onclick="clearbasket()">清空购物车</button></div>
    <script>
        function buy(num){
            var goodnum = '商品'+num;//num是传入的商品序号
            if (parseInt(localStorage.getItem(goodnum)) > 0){//如果该商品已经在购物车内了
                var goodno = parseInt(localStorage.getItem(goodnum))+1;//读出商品在购物车内的个数并且令其+1
                localStorage.setItem(goodnum, goodno);
            }
            else {
                localStorage.setItem(goodnum, 1);//如果商品不在购物车内，直接新建商品数量为1
            }
            console.log(localStorage);
        }
        function deletegood(num){
            var goodnum = '商品'+num;//num是传入的商品序号
            if (parseInt(localStorage.getItem(goodnum)) > 1){//如果该商品已经在购物车内，并且个数大于1
                var goodno = parseInt(localStorage.getItem(goodnum)) - 1;//读出商品在购物车内的个数并且令其-1
                localStorage.setItem(goodnum, goodno);
            }
            else if (parseInt(localStorage.getItem(goodnum)) == 1){
                localStorage.removeItem(goodnum);//如果该商品已经在购物车内，并且个数等于1，删除该商品
            }
            else {
                console.log("没得删！怎么想都没得删吧！");//没东西删，返回报错
            }
            console.log(localStorage);
        }
        function clearbasket(){
            localStorage.clear();
            console.log(localStorage);
        }
    </script>
</body>
</html>